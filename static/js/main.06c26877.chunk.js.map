{"version":3,"sources":["components/navigation/NavLinks.tsx","components/navigation/HomePage.tsx","components/Person.tsx","components/hooks/usePerson.ts","components/PeopleTable.tsx","api/data.ts","helpers/debounce.ts","components/hooks/usePeoplePage.ts","components/navigation/PeoplePage.tsx","App.tsx","index.tsx"],"names":["NavLinks","className","to","exact","id","HomePage","Person","props","name","sex","born","died","age","century","father","mother","children","history","useHistory","location","useLocation","path","replace","toLowerCase","onSelect","useCallback","push","pathname","search","usePerson","cN","person","onClick","PeopleTable","people","handleSort","map","th","key","Fragment","getPeople","a","fetch","res","json","debounce","f","delay","timer","args","clearTimeout","setTimeout","usePeoplePage","URLSearchParams","query","get","sortedBy","sortOrder","useState","setPeople","inputValue","setInputValue","useEffect","peopleFromServer","i","Math","ceil","filter","child","join","fetchPreparedPeople","historyPush","toString","searchPeople","e","value","target","trim","set","delete","searchedPeople","useMemo","includes","arr","thead","order","sortedArr","sort","b","localeCompare","reverse","sortPeople","event","theadLowerCased","textContent","PeoplePage","type","placeholder","onChange","App","component","ReactDOM","render","document","getElementById"],"mappings":"0PAGaA,EAAW,kBACtB,6BACE,yBAAKC,UAAU,eACb,kBAAC,IAAD,CACEC,GAAG,IACHD,UAAU,mBACVE,OAAK,GAHP,gBAOA,wBACEC,GAAG,aACHH,UAAU,6BAEV,4BAAI,kBAAC,IAAD,CAASC,GAAG,IAAIC,OAAK,GAArB,SACJ,4BAAI,kBAAC,IAAD,CAASD,GAAG,WAAZ,eChBCG,EAAW,WACtB,OACE,qC,wBCASC,EAAS,SAACC,GAAmB,IAAD,ICDhB,SAAC,GAEX,IADbH,EACY,EADZA,GAAII,EACQ,EADRA,KAAMC,EACE,EADFA,IAAKC,EACH,EADGA,KAAMC,EACT,EADSA,KAAMC,EACf,EADeA,IAAKC,EACpB,EADoBA,QAASC,EAC7B,EAD6BA,OAAQC,EACrC,EADqCA,OAAQC,EAC7C,EAD6CA,SAEnDC,EAAUC,cACVC,EAAWC,cACXC,EAAI,kBAAeb,EAAgBc,QAAQ,MAAO,KAAKC,eAS7D,MAAO,CACLnB,KACAI,OACAC,MACAC,OACAC,OACAC,MACAC,UACAC,SACAC,SACAC,WACAQ,SAlBeC,uBAAY,WAC3BR,EAAQS,KAAK,CACXC,SAAUN,EACVO,OAAQT,EAASS,WAElB,CAACX,EAASE,EAAUE,IAcrBA,OACAF,YDXEU,CAAUtB,GAbZH,EAFqC,EAErCA,GACAI,EAHqC,EAGrCA,KACAC,EAJqC,EAIrCA,IACAC,EALqC,EAKrCA,KACAC,EANqC,EAMrCA,KACAC,EAPqC,EAOrCA,IACAC,EARqC,EAQrCA,QACAC,EATqC,EASrCA,OACAC,EAVqC,EAUrCA,OACAC,EAXqC,EAWrCA,SACAQ,EAZqC,EAYrCA,SACAH,EAbqC,EAarCA,KACAF,EAdqC,EAcrCA,SAGF,OACE,wBACElB,UAAW6B,KAAE,GACXC,QAAQ,GADG,yCAEUlB,IAAY,GAFtB,cAGX,eAAwB,MAARJ,GAHL,cAIX,iBAA0B,MAARA,GAJP,cAKX,mBAAoBU,EAASQ,WAAaN,GAL/B,IAObW,QAASR,GAET,4BAAKpB,GACL,wBAAIH,UAAW6B,IAAG,CAChB,kBAAmBpB,EAAO,QAGzBF,GAEH,4BAAKC,GACL,4BAAKC,GACL,4BAAKC,GACL,wBAAIV,UAAW6B,IAAG,CAChB,qBAAsBlB,GAAO,MAG5BA,GAEH,4BAAKC,GACL,4BAAKC,GACL,4BAAKC,GACL,4BAAKC,KEhDEiB,EAAc,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,WAKpC,OACE,2BAAOlC,UAAU,2BACf,+BACE,4BAPS,CACb,KAAM,OAAQ,MAAO,OAAQ,OAAQ,MAAO,UAAW,SAAU,SAAU,YAO7DmC,KAAI,SAAAC,GAAE,OACZ,wBACEC,IAAKD,EACLL,QAASG,GAERE,QAKT,+BACGH,EAAOE,KAAI,SAAAL,GAAM,OAChB,kBAAC,IAAMQ,SAAP,CAAgBD,IAAKP,EAAO3B,IAC1B,kBAAC,EAAW2B,U,gDCvBXS,EAAS,uCAAG,4BAAAC,EAAA,sEACLC,MAHJ,qEAES,cACjBC,EADiB,yBAGhBA,EAAIC,QAHY,2CAAH,qDCYPC,MAdf,SACEC,EACAC,GAEA,IAAIC,EAEJ,OAAO,WAAsB,IAAD,uBAAjBC,EAAiB,yBAAjBA,EAAiB,gBAC1BC,aAAaF,GACbA,EAAQG,YAAW,WACjBL,EAAC,WAAD,EAAKG,KACJF,KCHMK,EAAgB,WAC3B,IAAMnC,EAAUC,cACVC,EAAWC,cACXQ,EAAS,IAAIyB,gBAAgBlC,EAASS,QACtC0B,EAAQ1B,EAAO2B,IAAI,UAAY,GAC/BC,EAAW5B,EAAO2B,IAAI,UACtBE,EAAY7B,EAAO2B,IAAI,aANI,EAQLG,mBAAS,IARJ,mBAQ1BxB,EAR0B,KAQlByB,EARkB,OASGD,mBAASJ,GATZ,mBAS1BM,EAT0B,KASdC,EATc,KAWjCC,qBAAU,YACiB,uCAAG,4BAAArB,EAAA,sEACKD,IADL,OACpBuB,EADoB,OAG1BJ,EAAUI,EAAiB3B,KAAI,SAACL,EAAgBiC,GAAjB,mBAAC,eAC3BjC,GAD0B,IAE7B3B,GAAI4D,EAAI,EACRpD,IAAKmB,EAAOpB,KAAkBoB,EAAOrB,KACrCG,QAASoD,KAAKC,KAAKnC,EAAOpB,KAAiB,KAC3CI,OAAQgB,EAAOhB,OAASgB,EAAOhB,OAAS,OACxCD,OAAQiB,EAAOjB,OAASiB,EAAOjB,OAAS,OACxCE,SAAU+C,EACPI,QAAO,SAACC,GAAD,OAAmBA,EAAMtD,SAAWiB,EAAOvB,MAAQ4D,EAAMrD,SAAWgB,EAAOvB,QAClF4B,KAAI,SAACgC,GAAD,OAAmBA,EAAM5D,QAC7B6D,KAAK,OAAS,aAbO,2CAAH,qDAiBzBC,KACC,IAEH,IAAMC,EAAc1B,GAAS,WAC3B5B,EAAQS,KAAK,CAAEE,OAAQA,EAAO4C,eAC7B,KAEGC,EAAehD,uBACnB,SAACiD,GACC,IAAMC,EAAQD,EAAEE,OAAOD,MAAME,OAE7BjD,EAAOkD,IAAI,QAASH,EAAMpD,gBAEpBK,EAAO2B,IAAI,UAAY,IAAIsB,QAC/BjD,EAAOmD,OAAO,SAGhBlB,EAAcc,GACdJ,MACC,CAAC3C,EAAQ2C,IAGVS,EAA2BC,mBAAQ,WACrC,OAAO/C,EAAOiC,QAAO,qBAAG3D,KAAH,EAASO,OAAT,EAAiBD,QAEpCS,cAAc2D,SAAS5B,QACxB,CAACpB,EAAQoB,IAYZ0B,EAAiBC,mBAAQ,kBAVN,SAACE,EAAeC,EAAeC,GAChD,IAAMC,EAAY,YAAIH,GAAKI,MAAK,SAAC9C,EAAG+C,GAAJ,MACV,kBAAb/C,EAAE2C,GACJ3C,EAAE2C,GAAkBK,cAAcD,EAAEJ,IACpC3C,EAAE2C,GAAqBI,EAAEJ,MAGhC,MAAiB,SAAVC,EAAmBC,EAAUI,UAAYJ,EAGnBK,CAAW,YAAIX,GAAiBxB,EAAoBC,KACjF,CAACuB,EAAgBvB,EAAWD,IAE9B,IAAMrB,EAAaV,uBAAY,SAACmE,GAC9B,IACMC,EADSD,EAAMhB,OAAuBkB,YACFvE,cAEtCiC,IAAaqC,GACfjE,EAAOkD,IAAI,SAAUe,GACrBjE,EAAOkD,IAAI,YAAa,QAExBlD,EAAOkD,IAAI,YACK,QAAdrB,EAAsB,OAAS,OAGnCxC,EAAQS,KAAK,CAAEE,OAAQA,EAAO4C,eAC7B,CAACvD,EAASW,EAAQ6B,EAAWD,IAEhC,MAAO,CACLI,aACAa,eACAO,iBACA7C,eC3FS4D,EAAa,WAAO,IAAD,EAM1B3C,IAJFQ,EAF4B,EAE5BA,WACAa,EAH4B,EAG5BA,aACAO,EAJ4B,EAI5BA,eACA7C,EAL4B,EAK5BA,WAGF,OACE,yBAAKlC,UAAU,aACb,2BACE+F,KAAK,OACLrB,MAAOf,EACPqC,YAAY,qCACZC,SAAUzB,IAEZ,kBAAC,EAAD,CAAavC,OAAQ8C,EAAgB7C,WAAYA,MCAxCgE,EAZH,WACV,OACE,yBAAKlG,UAAU,OACb,kBAAC,EAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOoB,KAAK,IAAIlB,OAAK,EAACiG,UAAW/F,IACjC,kBAAC,IAAD,CAAOgB,KAAK,UAAU+E,UAAWL,OCTzCM,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.06c26877.chunk.js","sourcesContent":["import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nexport const NavLinks = () => (\n  <nav>\n    <div className=\"nav-wrapper\">\n      <NavLink\n        to=\"/\"\n        className=\"brand-logo right\"\n        exact\n      >\n        People table\n      </NavLink>\n      <ul\n        id=\"nav-mobile\"\n        className=\"left hide-on-med-and-down\"\n      >\n        <li><NavLink to=\"/\" exact>Home</NavLink></li>\n        <li><NavLink to=\"/people\">People</NavLink></li>\n      </ul>\n    </div>\n  </nav>\n);\n","import React from 'react';\n\nexport const HomePage = () => {\n  return (\n    <h1>Home</h1>\n  );\n};\n","import React from 'react';\nimport cN from 'classnames';\nimport { usePerson } from './hooks/usePerson';\n\nexport const Person = (props: Person) => {\n  const {\n    id,\n    name,\n    sex,\n    born,\n    died,\n    age,\n    century,\n    father,\n    mother,\n    children,\n    onSelect,\n    path,\n    location,\n  } = usePerson(props);\n\n  return (\n    <tr\n      className={cN({\n        person: true,\n        [`person--lived-in-${century}`]: true,\n        'person--male': sex === 'm',\n        'person--female': sex === 'f',\n        'person--selected': location.pathname === path,\n      })}\n      onClick={onSelect}\n    >\n      <td>{id}</td>\n      <td className={cN({\n        'person--ancient': born < 1650,\n      })}\n      >\n        {name}\n      </td>\n      <td>{sex}</td>\n      <td>{born}</td>\n      <td>{died}</td>\n      <td className={cN({\n        'person--long-liver': age >= 65,\n      })}\n      >\n        {age}\n      </td>\n      <td>{century}</td>\n      <td>{father}</td>\n      <td>{mother}</td>\n      <td>{children}</td>\n    </tr>\n  );\n};\n","import { useHistory, useLocation } from 'react-router-dom';\nimport { useCallback } from 'react';\n\nexport const usePerson = ({\n  id, name, sex, born, died, age, century, father, mother, children,\n}: Person) => {\n  const history = useHistory();\n  const location = useLocation();\n  const path = `/people/${(name as string).replace(/\\s/g, '-').toLowerCase()}`;\n\n  const onSelect = useCallback(() => {\n    history.push({\n      pathname: path,\n      search: location.search,\n    });\n  }, [history, location, path]);\n\n  return {\n    id,\n    name,\n    sex,\n    born,\n    died,\n    age,\n    century,\n    father,\n    mother,\n    children,\n    onSelect,\n    path,\n    location,\n  };\n};\n","import React from 'react';\nimport { Person } from './Person';\n\nexport const PeopleTable = ({ people, handleSort }: PeopleProps) => {\n  const theads = [\n    'ID', 'Name', 'Sex', 'Born', 'Died', 'Age', 'Century', 'Father', 'Mother', 'Children',\n  ];\n\n  return (\n    <table className=\"people__table highlight\">\n      <thead>\n        <tr>\n          {theads.map(th => (\n            <th\n              key={th}\n              onClick={handleSort}\n            >\n              {th}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {people.map(person => (\n          <React.Fragment key={person.id}>\n            <Person {...person} />\n          </React.Fragment>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","const API_URL = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getPeople = async () => {\n  const res = await fetch(API_URL);\n\n  return res.json();\n};\n","function debounce<Params extends any[]>(\n  f: (...args: Params) => any,\n  delay: number,\n): (...args: Params) => void {\n  let timer: NodeJS.Timeout;\n\n  return (...args: Params) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      f(...args);\n    }, delay);\n  };\n}\n\nexport default debounce;\n","import React, {\n  useCallback, useEffect, useMemo, useState,\n} from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { getPeople } from '../../api/data';\nimport debounce from '../../helpers/debounce';\n\nexport const usePeoplePage = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const search = new URLSearchParams(location.search);\n  const query = search.get('query') || '';\n  const sortedBy = search.get('sortBy');\n  const sortOrder = search.get('sortOrder');\n\n  const [people, setPeople] = useState([]);\n  const [inputValue, setInputValue] = useState(query);\n\n  useEffect(() => {\n    const fetchPreparedPeople = async () => {\n      const peopleFromServer = await getPeople();\n\n      setPeople(peopleFromServer.map((person: Person, i: number) => ({\n        ...person,\n        id: i + 1,\n        age: person.died as number - (person.born as number),\n        century: Math.ceil(person.died as number / 100),\n        mother: person.mother ? person.mother : '----',\n        father: person.father ? person.father : '----',\n        children: peopleFromServer\n          .filter((child: Person) => child.father === person.name || child.mother === person.name)\n          .map((child: Person) => child.name)\n          .join(', ') || '----',\n      })));\n    };\n\n    fetchPreparedPeople();\n  }, []);\n\n  const historyPush = debounce(() => {\n    history.push({ search: search.toString() });\n  }, 500);\n\n  const searchPeople = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value.trim();\n\n      search.set('query', value.toLowerCase());\n\n      if (!(search.get('query') || '').trim()) {\n        search.delete('query');\n      }\n\n      setInputValue(value);\n      historyPush();\n    }, [search, historyPush],\n  );\n\n  let searchedPeople: Person[] = useMemo(() => {\n    return people.filter(({ name, mother, father }: Person) => (\n      name as string + mother as string + father\n    ).toLowerCase().includes(query));\n  }, [people, query]);\n\n  const sortPeople = (arr: Person[], thead: string, order: string | null) => {\n    const sortedArr = [...arr].sort((a, b) => (\n      typeof a[thead] === 'string'\n        ? (a[thead] as string).localeCompare(b[thead] as string)\n        : (a[thead] as number) - (b[thead] as number)\n    ));\n\n    return order === 'desc' ? sortedArr.reverse() : sortedArr;\n  };\n\n  searchedPeople = useMemo(() => sortPeople([...searchedPeople], sortedBy as string, sortOrder),\n    [searchedPeople, sortOrder, sortedBy]);\n\n  const handleSort = useCallback((event: React.MouseEvent<HTMLTableHeaderCellElement>) => {\n    const thead = (event.target as HTMLElement).textContent as keyof Person;\n    const theadLowerCased = (thead as string).toLowerCase();\n\n    if (sortedBy !== theadLowerCased) {\n      search.set('sortBy', theadLowerCased);\n      search.set('sortOrder', 'asc');\n    } else {\n      search.set('sortOrder',\n        sortOrder === 'asc' ? 'desc' : 'asc');\n    }\n\n    history.push({ search: search.toString() });\n  }, [history, search, sortOrder, sortedBy]);\n\n  return {\n    inputValue,\n    searchPeople,\n    searchedPeople,\n    handleSort,\n  };\n};\n","import React from 'react';\nimport { PeopleTable } from '../PeopleTable';\nimport { usePeoplePage } from '../hooks/usePeoplePage';\n\n\nexport const PeoplePage = () => {\n  const {\n    inputValue,\n    searchPeople,\n    searchedPeople,\n    handleSort,\n  } = usePeoplePage();\n\n  return (\n    <div className=\"container\">\n      <input\n        type=\"text\"\n        value={inputValue}\n        placeholder=\"Type something to search people...\"\n        onChange={searchPeople}\n      />\n      <PeopleTable people={searchedPeople} handleSort={handleSort} />\n    </div>\n  );\n};\n","import React from 'react';\n\nimport './App.scss';\n\nimport { Route, Switch } from 'react-router-dom';\nimport { NavLinks } from './components/navigation/NavLinks';\nimport { HomePage } from './components/navigation/HomePage';\nimport { PeoplePage } from './components/navigation/PeoplePage';\n\nconst App = () => {\n  return (\n    <div className=\"app\">\n      <NavLinks />\n      <Switch>\n        <Route path=\"/\" exact component={HomePage} />\n        <Route path=\"/people\" component={PeoplePage} />\n      </Switch>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}